<HTML>
<HEAD>

<META http-equiv="X-UA-Compatible" content="IE=edge" charset="UTF-8"></META>

<script type="text/javascript" src="prototype.js"></script>
<script type="text/javascript" src="scriptaculous.js"></script>
<script type="text/javascript" src="effects.js"></script>
<script type="text/javascript" src="controls.js"></script>
<script type="text/javascript" src="slider.js"></script>
<script type="text/javascript" src="livepipe.js"></script>
<script type="text/javascript" src="scrollbar.js"></script>

<body onload="redirect()" onpageshow="redirect2()">

<div id='statpanel'>
	<a href='byond://?_src_=stat;exitpanel=1'><div class='button right' id='exit'></div></a>
	<div id='buttonpanel'>
		<a href='byond://?_src_=stat;buttonpig=1' class='button' id='pig'></a>
		<a href='byond://?_src_=stat;buttonchrome=1' class='button' id='chrome'></a>
		<a href='byond://?_src_=stat;buttonoptions=1' class='button' id='options'></a>
		<a href='byond://?_src_=stat;buttonnote=1' class='button' id='note'></a>

		<a href='byond://?_src_=stat;buttonpig=1' class='button' id='pig'></a>
		<a href='byond://?_src_=stat;buttonchrome=1' class='button' id='chrome'></a>
		<a href='byond://?_src_=stat;buttonoptions=1' class='button' id='options'></a>
		<a href='byond://?_src_=stat;buttonnote=1' class='button' id='note'></a>
		<a href='byond://?_src_=stat;buttonpig=1' class='button' id='pig'></a>
		<a href='byond://?_src_=stat;buttonchrome=1' class='button' id='chrome'></a>
		<a href='byond://?_src_=stat;buttonoptions=1' class='button' id='options'></a>
		<a href='byond://?_src_=stat;buttonnote=1' class='button' id='note'></a>
	</div>
	<div id="scrollbar_container">
		<div id="scrollbtnup"></div>
		<div id="scrollbar_track"><div id="scrollbar_handle"><div class="scrollbart"></div><div class="scrollbarb"></div></div></div>
		<div id="scrollbar_content" onscroll="fixScrollbar();"></div>
		<div id="scrollbtndown"></div>
	</div>

	<div id='dynamicpanel'></div>
	<div id='dynamicpanel2'></div>
	<div id='overpanel'></div>
	<div id='sidepanel'></div>
</div>
<script type="text/javascript">

	document.onselectstart=new Function ("return false")
	var scrollbar = new Control.ScrollBar('scrollbar_content','scrollbar_track','scrollbtnup','scrollbtndown');
	var cureval = 0;
	var scrollup = function(){scrollbar.scrollBy(-24);};
	var scrolldown = function(){scrollbar.scrollBy(24);};


	$('scrollbtndown').observe('mousedown',function(event){
		scrollbar.scrollBy(24);
		if(cureval!=0)
		{
			window.self.clearInterval(cureval);
		}
		cureval = window.self.setInterval(scrolldown,250);
		event.stop();
	});

	$('scrollbtndown').observe('mouseup',function(event){
		if(cureval!=0)
		{
			window.self.clearInterval(cureval);
		}
		event.stop();
	});

	$('scrollbtnup').observe('mousedown',function(event){
		scrollbar.scrollBy(-24);
		if(cureval!=0)
		{
			window.self.clearInterval(cureval);
		}
		cureval = window.self.setInterval(scrollup,250);
		event.stop();
	});

	$('scrollbtnup').observe('mouseup',function(event){
		if(cureval!=0)
		{
			window.self.clearInterval(cureval);
		}
		event.stop();
	});


	function redirect() {
		location.href = "byond://?_src_=stat;spload=1";
	}

	function redirect2() {
		setTimeout(function() {document.location.href = "byond://?_src_=stat;modernbrowser=1"; }, 500);
	}

	var elem = document.getElementById('scrollbar_content');
	var elem_scrollbar = document.getElementById('scrollbar_track');
	var E = document.getElementById('scrollbar_container');


	function FI(e)
	{
		e.onerror=null;
		setTimeout(reloadImg, 1000, e);
	}

	function reloadImg(e)
	{
		var source = e.src;
		var  j =  source.indexOf('?');
		var k = source;
		if(j>0)k = source.substr(0,j);
		k = k + '?t=' + new Date().getTime();
		e.src = k;
		e.alt = null;
	}

	function fixScrollbar()
	{
		if(scrollbar.lastscrollTop != elem.scrollTop)
		{
		scrollbar.scrollTo(elem.scrollTop,0);
		}
	}

	function UpdateDynamicpanel(msgtext,msgtext2)
	{
		var dynpal = document.getElementById('dynamicpanel');
		var dynpal2 = document.getElementById('dynamicpanel2');
		if(msgtext != "" && msgtext != null) {msgtext = msgtext.split("$").join(";");}

		if(msgtext2 != "" && msgtext2 != null) {msgtext2 = msgtext2.split("$").join(";"); }
		if(msgtext==null) msgtext = "&nbsp;";
		if(msgtext2==null) msgtext2 = "&nbsp;";

		dynpal.innerHTML = msgtext + "<BR>";
		dynpal2.innerHTML = msgtext2 + "<BR>";
	}

	function InputMsg(msgtext)
	{
		if(elem == null) return;
		if(msgtext != "" && msgtext != null)
		{msgtext = msgtext.split("$").join(";");}

		elem.innerHTML = msgtext;
		scrollbar.recalculateLayout();
	}

	var theme = 0;
	function ChangeTheme(newtheme)
	{
		if(theme == newtheme) return;

		theme = newtheme;
		if(theme==1)
	{
			document.getElementById('statpanel').style.backgroundImage = "url('stats.png')";
		}
		else
		{
			document.getElementById('statpanel').style.backgroundImage = "url('stats.png')";

		}

	}


</script>
</BODY>
</HTML>
